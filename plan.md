Government Promises Tracker (GPT) — plan.md
0) One-liner

A sleek iOS app that lets anyone drill down from a world map → continent → country → state/province → city and see official promises from the current officeholder, with verifiable primary-source proof and a transparent fulfillment score.

Example seed (Canada, Oct 2025): Mark Carney is Prime Minister; his official PM site and the Liberal Party’s 2025 plan contain primary promises you can ingest first. 
Liberal Party of Canada
+3
Canada PM
+3
Canada PM
+3

1) Scope for v0 (local-only)

Platforms: iOS (iPhone), SwiftUI + MapKit.

Data: shipped locally in the app bundle (JSON/SQLite).

Geography:

World → continents (coarse polygons)

Countries: Canada (federal) as the seed

Optional: add U.S. (federal) next

Officeholders: only the current head of government/state for each country in v0 (e.g., Canada PM).

Promises: only those with primary sources (official campaign site, official government releases, official party PDF, official YouTube channel, official social posts).

No news articles or commentary.

2) Core product principles

Primary sources only. Every promise must include a URL to an official source (campaign site/manifesto PDF, official .gov site, official video w/ timestamp).

Immutable quotes. Store the exact quote + context (date, venue).

Transparent scoring. Every status (“Kept”, “In progress”, “Broken”, “Stalled”, “Obsolete/Changed conditions”) requires evidence links—again, primary sources.

Current officials only (auto-updated later via cloud; in v0 you ship a static “current” mapping).

Non-partisan and auditable: every displayed statement is traceable to its original, official source.

3) iOS architecture

Tech stack

Swift 5.10+, SwiftUI, MapKit, CoreLocation, GRDB.swift (SQLite with FTS5), Combine.

On-device DB: SQLite (bundled).

Search: SQLite FTS5 tables for fast, offline search (countries, states, cities, promises, people).

Geo data:

Countries/continents: simplified Natural Earth polygons converted to GeoJSON → pre-processed into tiled overlays or light vector shapes.

Admin codes: ISO-3166 (country), ISO-3166-2 (subdivisions).

Media handling: store only URLs (no hotlinking video). Add lightweight “Open Source” and “Copy link” actions.

Layers

DataKit (SQLite/GRDB models, migrations, seed loaders)

GeoKit (region drilldown, shapes, hit-testing)

SearchKit (FTS5 queries, ranking)

PromisesKit (status engine, evidence rules)

UI (SwiftUI views)

AdminTools (debug-only: importers, validators)

Performance

Precompute centroids + bounding boxes for regions to accelerate taps.

Use diffable data for long lists (promises).

Lazy load details and media previews.

4) Data model (SQLite / JSON)
4.1 Entities

Region

region_id (UUID)

type (continent|country|state|province|city)

iso_code (ISO 3166 or custom)

name (localized name)

parent_region_id

shape_ref (internal key to a compact polygon store)

Officeholder

person_id (UUID)

name, title (Prime Minister, Governor, Mayor…)

region_id (their jurisdiction)

party_name, party_url (if official)

start_date, end_date (nullable for current)

official_site_url

Promise

promise_id (UUID)

person_id, region_id

date_made

context (campaign rally, manifesto page, official address, etc.)

quote_exact (verbatim text)

summary (≤ 200 chars, generated by Claude)

tags (array)

due_by (nullable)

source_primary (URL; required)

source_type (manifesto_pdf|official_site|official_video|official_social|gov_release)

Evidence (fulfillment)

evidence_id

promise_id

date

action_type (bill_passed|budget_line|executive_order|program_launched|regulation_published|public_data_metric)

result_value (optional metric)

source_primary (URL; required)

notes

StatusSnapshot

promise_id

status (kept|in_progress|broken|stalled|obsolete)

score_0_1 (0.0–1.0)

computed_at

explanation (auto-generated + editable; cites evidence)

4.2 FTS5 virtual tables for search

fts_regions(name, iso_code, type)

fts_promises(summary, quote_exact, tags, person_name, region_name)

5) Status/Scoring rules (deterministic)

Kept (1.0): law/regulation/budget line or official action precisely matches the promise scope and criteria.

In progress (0.3–0.7): concrete partial actions (bill tabled, funding announced with program launched).

Broken (0.0): official reversal or deadline missed with no viable path.

Stalled (0.1–0.2): acknowledged delays/lack of legislative path.

Obsolete/Changed conditions (N/A): exogenous events make it non-evaluable; show explanation.

Every status must list at least one evidence URL that is primary (official .gov/.gc.ca domain, official party site/PDF, official YouTube channel, or official social handle post with archive timestamp).

6) Seed data (Canada federal, Oct 2025)

Officeholder

The Right Honourable Mark Carney, Prime Minister of Canada (24th PM, sworn in March 2025). Official PM site confirms current status. 
Canada PM
+1

Primary promise sources (examples for ingestion):

Liberal Party “Canada Strong” campaign PDF (Apr 19, 2025). 
Liberal Party of Canada

Party “Our Plan” / campaign pages (archived/permalinks). 
Liberal Party of Canada
+2
Liberal Party of Canada
+2

Official PMO releases used later for fulfillment evidence (e.g., trade/economy announcements). 
Canada PM
+1

Elections Canada for official results context. 
Elections Canada
+1

Example JSON (bundled)

{
  "regions": [
    {"region_id":"cnt:can","type":"country","iso_code":"CA","name":"Canada","parent_region_id":"cont:na"}
  ],
  "officeholders": [
    {
      "person_id":"p:carney",
      "name":"Mark Carney",
      "title":"Prime Minister of Canada",
      "region_id":"cnt:can",
      "party_name":"Liberal Party of Canada",
      "official_site_url":"https://www.pm.gc.ca/en",
      "start_date":"2025-03-14"
    }
  ],
  "promises": [
    {
      "promise_id":"pr:ca:taxcut",
      "person_id":"p:carney",
      "region_id":"cnt:can",
      "date_made":"2025-04-19",
      "context":"Campaign platform PDF (Canada Strong)",
      "quote_exact":"We will cut taxes for the middle class.",
      "summary":"Cut middle-class taxes amid U.S. trade war pressures.",
      "tags":["taxes","economy"],
      "due_by": null,
      "source_primary":"https://liberal.ca/wp-content/uploads/sites/292/2025/04/Canada-Strong.pdf",
      "source_type":"manifesto_pdf"
    }
  ],
  "evidence": [],
  "status_snapshots":[]
}


(Note: Use exact quotes and page numbers when you ingest; the example is illustrative.)

7) UX
7.1 Primary flows

World Map → Drilldown

Tap continent → list of countries (or pinch to zoom)

Tap country → “Current Leader” card + promise categories

Tap Promises → list with filters (category, status)

Tap a promise → details page with exact quote, source, status, evidence (expandable)

Global search (omnibox)

Type “Canada”, “Ontario”, “Carney”, “tax cut” → jump directly to either a region or an official or a promise. Autocomplete via FTS5.

Evidence viewer

Proof links open in in-app SFSafariViewController

Video links support timestamp deep links (e.g., ?t=87s)

7.2 Visual style

Clean, modern, dark-on-light with ample whitespace.

Cards with subtle shadows (cornerRadius 16).

Status chips: green / amber / red / gray.

Map regions use desaturated fills; on selection, animate a bloom/scale.

8) Claude SDK integration

Use cases

Extraction: Pull structured promises from a given official page/PDF/video transcript.

Summarization: Generate the ≤200-char promise summary from the exact quote.

Classification: Tag promises (e.g., taxes, health, immigration).

Status drafting: Given evidence documents, draft the status explanation (human approves).

Strict guardrails

Input must include the source URL (or PDF text).

Outputs must echo the original quote and never create content without a citation.

If a primary source is missing → reject with a reason.

Prompt template (extraction)

You are extracting official political promises for GPT (Government Promises Tracker).
Rules: Use only primary sources (official party/government sites, official PDFs, official candidate channels). Quote verbatim. If any item lacks a primary source, return an error.
Input:

Jurisdiction: <COUNTRY/STATE/CITY + ISO codes>

Officeholder: <NAME, TITLE, PARTY>

URL: <PRIMARY SOURCE URL>

(Optional) PDF text or transcript text
Output (JSON array) with objects:
{ promise_id, date_made, context, quote_exact, summary_<=200, tags[], source_primary, source_type }

Prompt template (status evaluation)

You are evaluating fulfillment status for a single promise.
Rules: Use only primary sources. For each evidence, return date, action_type, URL, and a one-line note. Compute status and a 1.0–0.0 score per the policy below.
Policy: kept=1.0 (directly implemented), in_progress=0.3–0.7, stalled=0.1–0.2, broken=0.0, obsolete=N/A.
Input: promise JSON + evidence URLs
Output: { status, score_0_1, explanation, evidence[] }

9) Import pipeline (local)

Step 1: Manually collect official sources for the seed country.

Canada: PM site (current), party campaign PDFs/pages. 
Canada PM
+2
Canada PM
+2

Step 2: Run a local ingest CLI (Swift or Node) that:

Downloads PDFs / HTML

Runs Claude extraction prompt

Validates sources (.gc.ca, party domains, official PDF)

Writes JSONL files per entity.

Step 3: Build a seed.sqlite with GRDB migrations.

Step 4: Bundle seed.sqlite into the app target.

10) Map data prep

Start from Natural Earth country geometries → simplify → store in a compact binary (e.g., Mapbox’s .vtpbf or custom RLE) referenced by shape_ref.

For v0, you can do tap-to-select via bounding boxes + a simple point-in-polygon on a reduced polygon set (keep it fast).

11) Screens (SwiftUI)

HomeMapView (world; overlay continents)

CountryView (leader card + promise categories + search in country)

PromisesListView (filters: status, tag; search)

PromiseDetailView (exact quote, summary, status chip, evidence list, “Open source”)

SearchView (unified across regions/people/promises)

ProofViewer (SFSafariViewController)

12) Governance & Moderation

Every promise/evidence must pass a primary-source validator.

Keep a provenance log (who ingested, when, from what URL, checksum of PDF page).

Provide a “Report an issue” button → opens mailto with prefilled JSON block.

13) Legal & Ethics

Display a disclaimer: informational only, sources linked, not affiliated with any government/party.

Respect local election laws; do not accept user-generated political content in v0.

Use official emblems only when permitted; otherwise show neutral cards.

14) Roadmap

Alpha (2–3 weeks)

Canada (federal) only

~10–20 promises with primary links (platform PDF + official PM releases) 
Liberal Party of Canada
+1

Local search + drilldown

Beta

Add provinces (Premiers)

Add U.S. federal (President)

Add status snapshots with at least 1–2 evidence items per promise

v1

Move DB to the cloud (Supabase/Postgres) with signed bundles for offline sync

Admin web console for ingest & review

Auto-refresh current officeholders nightly from curated lists (official portals)

15) Build checklist

 Create Xcode project (SwiftUI, iOS 17+)

 Add GRDB + seed DB; implement migrations + FTS5 virtual tables

 Import Natural Earth → simplified country shapes

 Implement HomeMapView + hit-testing

 Models: Region, Officeholder, Promise, Evidence, StatusSnapshot

 SearchKit (FTS5) + omnibox UI

 PromiseDetailView (proof links, status UI)

 Seed Canada federal data (Carney + 10+ promises) from official sources 
Canada PM
+1

 QA: tap/zoom performance, search accuracy, dead-link detector

 Ship TestFlight build (internal)

16) Coding notes & patterns

GRDB models with Codable to round-trip JSON⇄SQLite.

FTS5: normalize strings; store a search_blob with concatenated fields for ranking.

Link safety: if link fails to load → show “Source unavailable” with copyable URL.

Timestamps: store all dates as UTC ISO 8601.

Small helpers: OpenURL wrapper, ShareLink for citations, @MainActor view models.

17) Seed-source examples to start with (Canada)

PM official site (current status + releases). 
Canada PM
+1

Liberal Party platform pages + PDF (“Canada Strong”, Apr 19, 2025). 
Liberal Party of Canada
+1

Elections Canada 2025 results (context). 
Elections Canada

(For each promise, store the exact sentence from the PDF/page and link the precise page/section; where video is used, store the timestamp.)

18) Future: Cloud + Website

Backend: Postgres + PostgREST (or Supabase), row-level security, signed offline bundles.

API (read-only public): /regions, /officeholders/current, /promises?region=…, /evidence?promise=…

Admin console: Next.js app with role-based moderation and Claude-assisted extraction.

19) What “done” looks like (Alpha)

App opens to world map; I can:

Tap North America → Canada → see Mark Carney.

Open Promises, read exact quotes, and tap through to official source links.

Search “tax” → jump to a tax promise.

See a status field (even if “unrated” initially).

Everything works offline.

Appendix A — Data provenance tags

source_type: manifesto_pdf | official_site | official_video | official_social | gov_release | legal_gazette

domain_must_match: .gc.ca, .gov.<ccTLD>, party’s official domain, verified YT channel.

Appendix B — Example citations we used above

PM official bio confirming current PM (Mark Carney). 
Canada PM

PM site current news confirming active tenure (Oct 29–30, 2025 items). 
Canada PM

Liberal Party platform “Canada Strong” PDF (Apr 19, 2025). 
Liberal Party of Canada

Party “Our Plan/Canada Strong” pages for campaign text. 
Liberal Party of Canada
+1

Elections Canada results hub (45th General Election, Apr 28, 2025). 
Elections Canada


20) Industries & Stocks Impact (Policy → Markets)
20.1 Goal

For each promise, show which industries (and optionally representative ETFs or public companies) would likely be favored if the promise is fulfilled, along with:

a directional impact (↑, →, ↓),

a rough % impact range (not a prediction; a policy-linked sensitivity),

a confidence score, and

a prominent disclaimer.

Disclaimer (always visible):
“This feature is an informational mapping of leaders’ promises to potentially affected industries. It is not financial advice. Markets move for many reasons—macroeconomics, global events, liquidity, valuations, and more. Do your own research.”

20.2 Method (offline, deterministic, auditable)
A) Policy taxonomy

Normalize each promise into standardized policy levers:

Taxation (rate cuts/raises, credits, corporate vs. personal)

Spending (infrastructure, defense, healthcare, education, green subsidies)

Regulation (deregulation, emissions standards, zoning, labor)

Trade/Industrial (tariffs, export controls, reshoring incentives)

Monetary/FX (rare at local levels; most relevant federally)

Procurement (buy-local rules, defense awards, public tenders)

Store as policy_tags on each promise (e.g., ["infrastructure","green_subsidies","transport"]).

B) Mapping tables (policy → industries)

Ship a local, hand-curated matrix that maps policy tags to GICS/NAICS sectors and representative tickers/ETFs. Keep it human-readable and versioned so you can review changes.

Example (YAML/JSON):

{
  "policy_to_industry": [
    {
      "tag": "infrastructure",
      "industries": [
        {"code":"GICS:201040","name":"Construction & Engineering"},
        {"code":"GICS:151","name":"Materials"},
        {"code":"GICS:201060","name":"Building Products"}
      ],
      "etfs": ["XLB","PAVE","VIS"],
      "example_tickers": ["CAT","VMC","MLM"]
    },
    {
      "tag": "green_subsidies",
      "industries": [
        {"code":"GICS:551050","name":"Renewable Electricity"},
        {"code":"GICS:452020","name":"Electrical Components & Equipment"}
      ],
      "etfs": ["ICLN","TAN"],
      "example_tickers": ["ENPH","FSLR","NEE"]
    }
  ]
}


(Representative tickers/ETFs are optional in v0; you can ship just industries.)

C) Rough % impact ranges (policy sensitivity bands)

Instead of point forecasts, show bands tied to the type and size of policy. Think of this like an effect-size prior, not a price target.

Define Impact Classes with static ranges:

Minor: +0% to +2% (small, localized, pilot programs)

Moderate: +2% to +5%

Meaningful: +5% to +10%

Significant: +10% to +15%

Transformational: +15% to +25%

Then compute a band per industry by scoring the promise:

Impact Score = (Policy Intensity × Budget Scale × Timing Proximity × Jurisdiction Weight × Execution Likelihood)

Each factor is a 0–1 value you store per promise (manually for v0; model-assisted later):

Policy Intensity: how direct the policy is for that industry (0.2 low → 1.0 direct purchase mandate).

Budget Scale: categorical (small < $1B = 0.2; medium 0.5; large ≥ $10B = 0.9).

Timing Proximity: (already passed = 1.0; pledged this term = 0.6; requires constitutional change = 0.1).

Jurisdiction Weight: (city 0.2; state/province 0.6; national 1.0; adjust for industry locality).

Execution Likelihood: (in power with majority = 0.8–1.0; minority/coalition = 0.4–0.7; legal obstacles = 0.2–0.4).

Map the final 0–1 Impact Score to a band:

0.00–0.20 → Minor

0.21–0.40 → Moderate

0.41–0.60 → Meaningful

0.61–0.80 → Significant

0.81–1.00 → Transformational

Show the band (e.g., “Meaningful: +5–10%”) and a confidence (e.g., 0.62) next to it.

Note: For policies likely negative for an industry (e.g., stricter emissions for coal), mirror with downward bands (e.g., −2% to −5%). Use a direction field.

D) Confidence score

Confidence = average of normalized subfactors (or a weighted average if you choose). Display as Low / Medium / High with a tooltip listing the subfactors.

20.3 Data model additions (SQLite)

Tables

-- Lookup
CREATE TABLE industry (
  industry_id TEXT PRIMARY KEY,
  code TEXT NOT NULL,         -- e.g., "GICS:201040"
  name TEXT NOT NULL
);

CREATE TABLE policy_tag (
  tag TEXT PRIMARY KEY,       -- e.g., "infrastructure"
  description TEXT
);

CREATE TABLE policy_tag_industry (
  tag TEXT NOT NULL,
  industry_id TEXT NOT NULL,
  weight REAL NOT NULL DEFAULT 1.0,
  PRIMARY KEY(tag, industry_id),
  FOREIGN KEY(tag) REFERENCES policy_tag(tag),
  FOREIGN KEY(industry_id) REFERENCES industry(industry_id)
);

-- Promise-level policy mapping
ALTER TABLE promise ADD COLUMN policy_tags_json TEXT; -- ["infrastructure","green_subsidies"]
ALTER TABLE promise ADD COLUMN effect_inputs_json TEXT; -- { "intensity":0.8,"budget":0.9,"timing":0.7,"jurisdiction":1.0,"execution":0.6 }

-- Computed impacts
CREATE TABLE promise_industry_impact (
  promise_id TEXT NOT NULL,
  industry_id TEXT NOT NULL,
  direction INTEGER NOT NULL,      -- -1, 0, 1
  impact_class TEXT NOT NULL,      -- "minor"|"moderate"|...
  pct_low REAL NOT NULL,           -- e.g., 0.05
  pct_high REAL NOT NULL,          -- e.g., 0.10
  confidence REAL NOT NULL,        -- 0..1
  rationale TEXT,                  -- short explanation ("$12B capex over 4y to roads/bridges")
  PRIMARY KEY (promise_id, industry_id),
  FOREIGN KEY (promise_id) REFERENCES promise(promise_id),
  FOREIGN KEY (industry_id) REFERENCES industry(industry_id)
);


Swift models (sketch)

struct PolicyEffectInputs: Codable {
  var intensity: Double
  var budget: Double
  var timing: Double
  var jurisdiction: Double
  var execution: Double
}

enum ImpactClass: String, Codable { case minor, moderate, meaningful, significant, transformational }

struct PromiseIndustryImpact: Codable, FetchableRecord, PersistableRecord {
  let promiseId: String
  let industryId: String
  let direction: Int  // -1,0,1
  let impactClass: ImpactClass
  let pctLow: Double
  let pctHigh: Double
  let confidence: Double
  let rationale: String?
}

20.4 UI/UX

Promise Detail View
Add a new “Market Impact” section:

Chips of affected industries with arrows (↑ / ↓).

Tap to expand → see band (e.g., “+5% to +10%”), confidence, and a one-line rationale.

“Representative funds/companies” (optional): show ETFs first; if tickers are shown, include a sub-disclaimer: “Tickers are examples, not recommendations.”

Filters
On list pages, add a Market filter: show promises with Significant+ impacts first.

Copy
At top of the section, show the always-visible disclaimer.

20.5 Example (illustrative)
{
  "promise_id": "pr:ca:green-infra-2025",
  "quote_exact": "We will invest $12B over four years to accelerate renewable energy and modernize the grid.",
  "policy_tags": ["green_subsidies","infrastructure","grid_modernization"],
  "effect_inputs": {"intensity":0.9,"budget":0.9,"timing":0.6,"jurisdiction":1.0,"execution":0.7},
  "impacts": [
    {
      "industry_code":"GICS:551050",
      "direction": 1,
      "impact_class": "significant",
      "pct_low": 0.10,
      "pct_high": 0.15,
      "confidence": 0.64,
      "rationale": "Large multi-year capex targeted to renewables/grid increases orders and PPA volumes."
    },
    {
      "industry_code":"GICS:452020",
      "direction": 1,
      "impact_class": "meaningful",
      "pct_low": 0.05,
      "pct_high": 0.10,
      "confidence": 0.58,
      "rationale": "Electrical components demand likely to rise with grid modernization."
    }
  ]
}

20.6 Guardrails & Compliance

Never show broker-like language (“buy”, “target price”).

Use ranges + confidence; avoid false precision.

Provide sources for the promise itself (primary sources only, as per app rules).

Consider a global setting to hide tickers and show only industries/ETFs in early versions.

Add a “Why this?” info sheet explaining the five subfactors and that ranges are policy-sensitivity placeholders, not forecasts.

20.7 Offline now, cloud later

v0 (offline): ship the mapping matrix and a few curated examples. Compute impacts on-device after you tag each promise.

Cloud (v1): pull nightly macro updates (e.g., inflation, rates, sector beta regimes) to adjust bands up/down and refine confidence. Cache a signed “impact profile” bundle per region for offline use.

20.8 Admin workflow (Claude-assisted, human-in-loop)

Ingest promise (primary source only).

Assign policy_tags (Claude suggests, editor approves).

Fill effect inputs (Claude proposes; editor sets final values).

System computes bands; editor can downgrade/upgrade the impact class with a rationale.

Publish.

20.9 QA scenarios

No direct industry mapping → show “No clear market impact identified.”

Conflicting tags (e.g., subsidy + tax) → net effect uses weighted average; show both with arrows and a net summary.

Local promise with national industry → jurisdiction weight caps impact class.

Broken/Stalled promise → keep mapping visible but greyed out; show “Impact inactive (status: Broken/Stalled).”

20.10 What you can ship this week (practical v0)

Add policy_tag + industry tables and the promise_industry_impact view.

Seed 10–15 policy→industry rows for your first region (Canada federal).

Implement a Market Impact card on PromiseDetailView using the bands logic above.

Drop in the global disclaimer and “Why this?” explainer.

